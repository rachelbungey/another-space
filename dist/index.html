<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Another Space</title>
  <style>
    html,
    body {
      overscroll-behavior: none !important;
    }

    #loading-screen {
      position: fixed;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: rgb(255, 255, 255);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 50;
    }

    .load-container {
      display: flex;
      flex-direction: column;
      font-family: Courier New, Courier, monospace;
      font-size: 12px;
      width: 240px;
    }

    .header {
      width: 100%;
      font-family: Courier New, Courier, monospace;
      position: absolute;
      top: 0;
      z-index: 100;
      display: flex;
    }

    .header a {
      margin: 14px;
      cursor: pointer;
      text-decoration: none;
      font-size: 26px;
      color: #000;
      font-weight: 700;
    }

    .spacer {
      flex-grow: 1;
    }

    #progress {
      width: 100%;
      border-style: solid;
      border-width: 1px;
      border-color: black;
      margin-bottom: 5px;
    }

    #bar {
      width: 1%;
      height: 10px;
      background-color: rgb(14, 14, 14);
    }

    @media screen and (max-width: 800px) {
      .header a {
        font-size: 16px;
      }
    }
  </style>
</head>

<body>
  <div class="header">
    <a href="/">Another Space</a>
    <div class="spacer"></div>
    <a href="./about.html">.about</a>
    <a href="https://codercat.tk" target="_blank">.other</a>
  </div>

  <div id="loading-screen">
    <div class="load-container">
      <div id="progress">
        <div id="bar"></div>
      </div>
      <div id="load-log">loading creative matter</div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      const ascene = document.querySelector('a-scene');
      const assets = document.querySelector('a-assets');
      const { manager: loadManager } = assets.fileLoader;
      const loadingScreen = document.querySelector('#loading-screen');

      const barEl = document.getElementById("bar");
      const loadLogEl = document.getElementById("load-log");
      const width = 1;

      const phrases = ['complete lack of surprise', "inflamed sense of rejection", 'smirking revenge', 'cold sweat', 'broken heart'];

      loadManager.onProgress = (url, itemsLoaded, itemsTotal) => {
        const width = (itemsLoaded / itemsTotal) * 100;
        const idx = Math.floor(phrases.length * Math.random());

        barEl.style.width = width + "%";
        loadLogEl.innerHTML = `Loading ${phrases[idx]}`;
      }

      ascene.addEventListener('loaded', () => {
        loadingScreen.style.display = 'none';
        console.log('[+] All assets loaded!')
      });
    });
  </script>

  <script src="bundle.js"></script>

  <script>
    const THREE = AFRAME.THREE;
    AFRAME.registerComponent('transparent', {
      init: function () {
        this.el.addEventListener("object3dset", () => {
          const scene = this.el.getObject3D("mesh");
          
          scene.traverse((object) => {
            if (object.isMesh) {
              object.material.side = THREE.DoubleSide;
              object.material.alphaTest = 0.5
              object.material.transparent = true;
              object.material.needsUpdate = true;
            }
          });

        });
      }
    });
  </script>

  <a-scene renderer="colorManagement: true" background="color: #eef4fd" visible=true vr-button sound-system
    loading-screen="enabled: false" fog="type: exponential; density: 0.00001; color: #ffffff" light="defaultLightsEnabled: false">

    <a-assets>
      <img id="env-map" src="assets/textures/env.jpg" preload="auto" />
      <a-asset-item id="evironment" src="assets/models/env.glb"></a-asset-item>
      <a-asset-item id="plants" src="assets/models/plants.glb"></a-asset-item>
      <a-asset-item id="hand_right" src="assets/models/hand_right.glb"></a-asset-item>
      <a-asset-item id="hand_left" src="assets/models/hand_left.glb"></a-asset-item>
      <audio id="gallery-background-sound" src="assets/sounds/Background ambience of a museum setting _AOS01433.mp3" preload="auto"></audio>
      <audio id="gallery-music" src="assets/sounds/Underwater Exploration - Godmode.mp3" preload="auto"></audio>

      <video id="alex_bois-31" muted loop="true" src="assets/videos/31_Alex_Bois.mp4"></video>
      <video id="harddrive-29" muted loop="true" src="assets/videos/29_Harddrive.mp4"></video>
      <video id="flora-02" muted loop="true" src="assets/videos/02_Flora.mp4"></video>
      <video id="emilia_wingfield-37" muted loop="true" src="assets/videos/37_Emilia_Wingfield.mp4"></video>
      <video id="bram_smiley-10" muted loop="true" src="assets/videos/10_Bram_smiley.mp4"></video>
      <video id="joel_scott-43" muted loop="true" src="assets/videos/43_Joel_Scott.mp4"></video>
    </a-assets>

    <a-entity id="camera-rig" position="0 0 8" cc-keyboard-controls="acceleration: 18" cc-vr-controls="speed: 0.4"
      collisions mover quick-turn>
      <a-entity id="camera" position="0 1.6 0" camera look-controls>
      </a-entity>
      <a-entity oculus-go-controls></a-entity>
      <a-entity id="rightHandController" custom-vr-controller="model: #hand_right; hand: right;"></a-entity>
      <a-entity id="leftHandController" custom-vr-controller="model: #hand_left; hand: left;"></a-entity>
    </a-entity>

    <a-entity id="city-scene" visible="true">
      <a-entity id="dirLight" light="color: #d1e7ff; intensity: 2" position="-2.32 3.29 -3.77"></a-entity>


      <a-entity id="ambiLight" light="type: ambient; color: #d1e7ff; intensity: 0.01" visible=""></a-entity>
      <a-entity sky></a-entity>

      <!-- SOUNDS -->
      <a-entity sound="src: #gallery-background-sound; positional: false; autoplay: true; loop: true; volume: 0.1;">
      </a-entity>
      <a-entity sound="src: #gallery-music; positional: false; autoplay: true; loop: true; volume: 0.8;">
      </a-entity>

      <!-- BUILDING -->
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: center_floor"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8; caustic: true" gltf-part="src: #evironment; part: center_walls"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8; caustic: true" gltf-part="src: #evironment; part: center_ceiling"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: pool_outside"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: outer_walls_L"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: inner_walls_L"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: ceiling3_L"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: ceiling2_L"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: ceiling1_L"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: floor1_L"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: floor2_L"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: floor3_L"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: floor1_R"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: outer_walls_R"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: floor2_R"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: inner_walls_R"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: floor3_R"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: ceiling3_R"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: ceiling2_R"></a-entity>
      <a-entity collider cc-material="diffuseTexMult: 1.8" gltf-part="src: #evironment; part: ceiling1_R"></a-entity>
      <a-entity caustic-material="alphaVal:  0.44;  color1:  #a3bce0;  color2:  #c9f3ff" gltf-part="src: #evironment; part: pool_water"></a-entity>
      <a-entity caustic-material="diffuseTexMult: 1.8; color1:  #cee7fd;  color:  #00fffb" gltf-part="src: #evironment; part: pool_inside"></a-entity>
      <a-entity cc-material="fakeSubsurface:  1;  transparent:  true;  subsurfacecolor:  #bbff00" position="0 0 0" gltf-part="src: #plants; part: center_shrubs">
      </a-entity>

      <!-- SCULPTURES -->
      <a-entity material="shader:flat; wireframe: true; color: white" gltf-part="src: #evironment; part: 29_Harddrive" spin></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 32_Saul_Frame"></a-entity>
      <a-entity chrome-material="envMapIntensity: 2; color: white" gltf-part="src: #evironment; part: 32_Saul_Mirror"></a-entity>
      <a-entity chrome-material="envMapIntensity: 2; color: white" gltf-part="src: #evironment; part: 28_Ben_khan"></a-entity>
      <a-entity chrome-material="envMapIntensity: 2; color: white" gltf-part="src: #evironment; part: 24_Yorum_01"></a-entity>
      <a-entity chrome-material="envMapIntensity: 1.2; color: white" gltf-part="src: #evironment; part: 25_H2erg" spin></a-entity>

      <!-- IMAGES -->
      <a-entity cc-material gltf-part="src: #evironment; part: 26_Peony_Gent_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 36_Martha_Bailey_01_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 36_Martha_Bailey_01_02"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 23_Shane_Lester_02"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 36_Martha_Bailey_01_03"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 23_Shane_Lester_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 26_Peony_Gent_03"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 22_Kat"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 38_Anna_Sheridan_H2erg_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 34_Louise_Silfversparre_18"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 38_Anna_Sheridan_H2erg_02"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 21_Henry_Hoffman"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 39_Fabrizio_Manzi_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 20_Ivy_Mai"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 41_Paul_Beaudoin_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 19_Sarah_Scattergood"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 26_Peony_Gent_07"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 18_Sarah_Tucker_08"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 26_Peony_Gent_09"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 34_Louise_Silfversparre_13"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 33_Alex_vernon_03"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 18_Sarah_Tucker_05"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 35_Caitlin_Hickling_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 14_Mark_Manzi_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 13_BD85"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 14_Mark_Manzi_02"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 11_Mike_Zimmerman_02"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 14_Mark_Manzi_03"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 11_Mike_Zimmerman_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 34_Louise_Silfversparre_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 09_Bryce_Aspinall"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 15_Kyla_Callista_03"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 08_Jamal_Finni"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 34_Louise_Silfversparre_04"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 07_James_Mason_06"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 16_Daniel_Euphrat_02"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 07_James_Mason_05"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 16_Daniel_Euphrat_03"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 07_James_Mason_04"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 34_Louise_Silfversparre_06"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 07_James_Mason_03"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 17_Daniel_Emmanuel"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 07_James_Mason_02"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 34_Louise_Silfversparre_10"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 07_James_Mason_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 18_Sarah_Tucker_04"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 01_Ben_Clark"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 03_River_Cousins"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 04_Tolga_Tarhan_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 04_Tolga_Tarhan_02"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 04_Tolga_Tarhan_03"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 04_Tolga_Tarhan_04"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 04_Tolga_Tarhan_05"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 04_Tolga_Tarhan_06"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 05_Hin_01"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 05_Hin_02"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 05_Hin_03"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 06_Maura_Jamieson"></a-entity>
      <a-entity cc-material gltf-part="src: #evironment; part: 42_Agnes_Jonas_01"></a-entity>

      <!-- VIDEOS -->
      <a-entity gltf-part="src: #evironment; part: 29_Harddrive1" video="src: #harddrive-29; triggerRadius: 4"></a-entity>
      <a-entity gltf-part="src: #evironment; part: 37_Emilia_Wingfield" video="src: #emilia_wingfield-37"></a-entity>
      <a-entity gltf-part="src: #evironment; part: 31_Alex_Bois" video="src: #alex_bois-31"></a-entity>
      <a-entity gltf-part="src: #evironment; part: 02_Flora" video="src: #flora-02"></a-entity>
      <a-entity gltf-part="src: #evironment; part: 10_Bram_smiley" video="src: #bram_smiley-10"></a-entity>
      <a-entity gltf-part="src: #evironment; part: 43_Joel_Scott" video="src: #joel_scott-43"></a-entity>
    </a-entity>
  </a-scene>
</body>

</html>